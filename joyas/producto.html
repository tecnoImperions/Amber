<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Producto - Amber Joyas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet"/>
  <style>
    .producto-img { width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:8px; }
    .precio { color:#ffb81c; font-weight:700; font-size:1.25rem; }
  </style>
</head>
<body>
  <nav class="navbar navbar-light" style="background:#003087;">
    <div class="container">
      <a class="navbar-brand text-white" href="index.html"><i class="bi bi-gem" style="color:#ffb81c"></i> Amber</a>
    </div>
  </nav>

  <main class="container my-4">
    <div id="contenido"></div>
  </main>

  <footer class="text-center py-3" style="background:#003087;color:#fff">
    <div class="container">Amber Joyas â€” <a href="https://wa.me/59163488086" class="text-white">WhatsApp</a></div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // obtener id de querystring
    function getParam(name){
      const url = new URL(location.href);
      return url.searchParams.get(name);
    }
    const id = Number(getParam('id') || 0);
    if(!id){ document.getElementById('contenido').innerHTML = '<p>Producto no especificado.</p>'; }

    fetch('productos.json')
      .then(r => r.json())
      .then(list => {
        const p = list.find(x => x.id === id);
        if(!p){ document.getElementById('contenido').innerHTML = '<p>Producto no encontrado.</p>'; return; }

        const img = location.origin + '/' + p.imagen;
        const html = `
          <div class="row g-4 align-items-center">
            <div class="col-12 col-md-6">
              <img src="${p.imagen}" alt="${p.nombre}" class="producto-img shadow-sm">
            </div>
            <div class="col-12 col-md-6">
              <h3>${p.nombre}</h3>
              <p class="text-muted">CÃ³digo: <strong>${p.codigo}</strong></p>
              <p class="mb-2"><small class="text-muted">${p.categoria} â€¢ ${p.material}</small></p>
              <p class="precio"><span style="font-size:1.05rem">ðŸ‡§ðŸ‡´</span> ${p.precio} ${p.moneda}</p>
              <p class="mt-3">${p.descripcion}</p>

              <div class="mt-4 d-grid gap-2">
                <a class="btn btn-success" target="_blank" href="${crearWhatsappLink(p)}">
                  <i class="bi bi-whatsapp"></i> Pedir por WhatsApp
                </a>
                <a class="btn btn-outline-secondary" href="index.html">Volver al catÃ¡logo</a>
              </div>
            </div>
          </div>
        `;
        document.getElementById('contenido').innerHTML = html;
      });

    function crearWhatsappLink(p){
      const baseImg = location.origin + '/' + p.imagen;
      const text = `Hola,%20deseo%20solicitar%20esta%20joya%20de%20Amber:%0A` +
                   `*${encodeURIComponent(p.nombre)}*%20(CÃ³digo:%20${encodeURIComponent(p.codigo)})%0A` +
                   `Precio:%20${encodeURIComponent(p.precio)}%20${encodeURIComponent(p.moneda)}%0A` +
                   `Imagen:%20${encodeURIComponent(baseImg)}%0A%0APor%20favor%20indiquen%20disponibilidad%20y%20tamaÃ±os.`;
      return `https://wa.me/59163488086?text=${text}`;
    }
  </script>
</body>
</html>
